---

---
  
```{r include=FALSE}
#Setting working directories
getwd()
try(setwd("/Users/emiliasicari/Desktop/Final_assignment/Website/"), silent = TRUE)
try(setwd("/Users/rafalopezv/Dropbox/R/Final_assignment/Website/"), silent = TRUE)
#Loading packages
library(dygraphs)
library(DT)
library(knitr)
opts_chunk$set(fig.align='center')
opts_chunk$set(dev='svg')
opts_chunk$set(tidy=FALSE)
opts_chunk$set(message=FALSE)

#laoding data
try(source("/Users/emiliasicari/Desktop/Final_assignment/Preliminary_analyses.R"))
try(source("/Users/rafalopezv/Dropbox/R/Final_assignment/Preliminary_analyses.R"))
```
<br>
<br>
<br>
<center>
# Why do Singaporans buy cars? 
<br>
<br>
<br>
<img src="Website/pictures/car.png" height="2000px" width="1500px" />
<br>
<br>
<br>

##Determinants of consumption behaviour

#####By: [Emilia Sicari](https://github.com/EmiliaSicari) & [Rafael Lopez V.](https://github.com/rafalopezv)
<br>
<br>
<img src="Website/pictures/arrow.ico" height="100px" width="100px" />
<center>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

## Project structure 

## Findings

## Limitations

## Next steps

## References


```{r include=TRUE, echo = FALSE, fig.align = 'center', fig.cap="GDP per capita and average income in Singapore (19995-2014)"}
graph1 <- data.final[c("date", "gdp.per.capita", "top", "bottom")]
dygraph(graph1, main = "Income distribution in Singapore (1995-2014)") %>% 
  dySeries("gdp.per.capita", label = "GDP per capita") %>%
  dySeries("top", label = "Top10%income") %>%
  dySeries("bottom", label = "Bottom10%income") %>%
  dyRangeSelector()
```

```{r include=TRUE, echo = FALSE, fig.align = 'center'}
graph2 <- data.final[c("date", "residents", "non.residents")]
dygraph(graph2, main = "Population growth in Singapore (1995-2014)") %>%
  dySeries("residents", label = "Residents") %>%
  dySeries("non.residents", label = "Non Residents") %>%
  dyOptions(stackedGraph = TRUE) %>%
  dyRangeSelector(height = 20)

```

```{r include=TRUE, echo = FALSE, fig.align = 'center'}
graph3 <- data.final[c("date", "bus.u.pop", "lrt.u.pop", "mrt.u.pop")]
dygraph(graph3, main = "Public Transportation use in Singapore (1995-2014)") %>%
  dySeries("bus.u.pop", label = "Buses") %>%
  dySeries("lrt.u.pop", label = "LRT") %>%
  dySeries("mrt.u.pop", label = "MRT") %>%
  dyRangeSelector()

```

```{r include=TRUE, echo = FALSE, fig.align = 'center'}
graph4 <- data.final[c("date", "inequality")]
dygraph(graph4, main = "Inequality gap in Singapore (1995-2014)") %>%
  dyOptions(fillGraph = TRUE, fillAlpha = 0.4)
```


```{r include=TRUE, echo = FALSE, fig.align = 'center'}
graph5 <- data.final[c("date", "car.u.pop")]
dygraph(graph5, main = "Private Cars in Singapore (1995-2014)") %>%
  dyOptions(drawPoints = TRUE, pointSize = 2)
```

```{r include=TRUE, echo = FALSE, fig.align = 'center'}
#Creating the final table with only the variables we used
TABLE <- data.final
#Eliminating useless columns
TABLE$population <- NULL 
TABLE$cars <- NULL 
TABLE$rentalcars <- NULL 
TABLE$taxis <- NULL 
TABLE$buses <- NULL 
TABLE$motorbikes <- NULL 
TABLE$other <- NULL 
TABLE$bus.u <- NULL 
TABLE$mrt.u <- NULL 
TABLE$lrt.u <- NULL 
TABLE$gdp.per.capita.ch <- NULL 
TABLE$cars.ch <- NULL 
TABLE$top.ch <- NULL 
TABLE$bottom.ch <- NULL 
TABLE$population.ch <- NULL 
TABLE$lcar.u.pop <- NULL 
TABLE$lgdp <- NULL 
TABLE$ltop <- NULL 
TABLE$lbottom <- NULL 

#Ordering the columns
TABLE <- TABLE[,c(1,2,11,3,4,5,6,7,8,9,10)]

#Changing the names of columns
names(TABLE) <- c("Year", "Residents", "Non Residents", "GDP per capita", "Top10%income", "Bottom90%income", "Inequality gap", "Buses utilization", "MRT utilization", "LRT utilization", "Private Cars")

# Creating an interactive table
DT::datatable(TABLE)


```
